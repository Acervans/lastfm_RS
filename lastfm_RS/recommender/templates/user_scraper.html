{% extends "base_generic.html" %}
{% block title %}
    Data Scraped from {{ alias }}
{% endblock title %}
{% block scripts %}
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock scripts %}
{% block content %}
    <h2>
        Last.FM Data from <a href="{{ user_url }}" target="_blank">{{ alias }}</a>
    </h2>
    <div id="scrape-tracks">
        <h4>{{ alias }}'s Tracks</h4>
        <table class="table table-light table-striped table-bordered top-tracks-table">
            <caption class="caption-top">Top Tracks</caption>
            <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Artist</th>
                    <th>Album</th>
                    {% if do_tags == "true" %}
                        <th>Tags</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody id="top-tracks"></tbody>
        </table>
        <table class="table table-light table-striped table-bordered loved-tracks-table">
            <caption class="caption-top">Loved Tracks</caption>
            <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Artist</th>
                    <th>Album</th>
                    <th>Loved at</th>
                    {% if do_tags == "true" %}
                        <th>Tags</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody id="loved-tracks"></tbody>
        </table>
        <table class="table table-light table-striped table-bordered recent-tracks-table">
            <caption class="caption-top">Recent Tracks</caption>
            <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Artist</th>
                    <th>Album</th>
                    <th>Listened at</th>
                    {% if do_tags == "true" %}
                        <th>Tags</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody id="recent-tracks"></tbody>
        </table>
    </div>
    <div id="scrape-artists">
        <h4>{{ alias }}'s Top Artists</h4>
        <table class="table table-light table-striped table-bordered top-artists-table">
            <thead class="table-dark">
                <tr>
                    <th>Name</th>
                    {% if do_tags == "true" %}
                        <th>Tags</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody id="top-artists"></tbody>
        </table>
    </div>
    <div id="scrape-albums">
        <h4>{{ alias }}'s Top Albums</h4>
        <table class="table table-light table-striped table-bordered top-albums-table">
            <thead class="table-dark">
                <tr>
                    <th>Title</th>
                    <th>Artist</th>
                    {% if do_tags == "true" %}
                        <th>Tags</th>
                    {% endif %}
                </tr>
            </thead>
            <tbody id="top-albums"></tbody>
        </table>
    </div>
    {% if do_tags == "true" %}
        <div id="scrape-tags">
            <h4>{{ alias }}'s Tags</h4>
            <canvas id="tags-piechart"></canvas>
        </div>
    {% endif %}

    <script type="text/javascript">
        const user   = "{{ username }}",
              useDb  = "{{ use_db }}",
              scrape = {{ scrape|safe }},
              doTags = {{ do_tags }};
    </script>
    {% load static %}
    <script type="text/javascript" src="{% static 'js/scraper_script.js' %}"></script>
{% endblock content %}
